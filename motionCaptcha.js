jQuery.fn.motionCaptcha||function(t){function e(t){this.init(t)}function s(t,e){return new function(t,e){this.X=t,this.Y=e}(t,e)}function n(t,e){this.Name=t,this.Points=o(e,a);var n=h(this.Points);this.Points=c(this.Points,-n),this.Points=function(t,e){var n,a=function(t){var e,s=1/0,n=-1/0,a=1/0,i=-1/0;for(e=0;e<t.length;e++)t[e].X<s&&(s=t[e].X),t[e].X>n&&(n=t[e].X),t[e].Y<a&&(a=t[e].Y),t[e].Y>i&&(i=t[e].Y);return new function(t,e,s,n){this.X=t,this.Y=e,this.Width=s,this.Height=n}(s,a,n-s,i-a)}(t),i=[];for(n=0;n<t.length;n++){var r=t[n].X*(e/a.Width),o=t[n].Y*(e/a.Height);i[i.length]=s(r,o)}return i}(this.Points,i),this.Points=function(t,e){var n,a=d(t),i=[];for(n=0;n<t.length;n++){var r=t[n].X+e.X-a.X,o=t[n].Y+e.Y-a.Y;i[i.length]=s(r,o)}return i}(this.Points,r),this.Vector=l(this.Points)}t.fn.motionCaptcha=function(i){return this.each(function(){var r=t.extend({},t.fn.motionCaptcha.defaults,i);r.actionId="#"+r.actionId.replace(/\#/g,""),r.canvasId="#"+r.canvasId.replace(/\#/g,""),r.divId="#"+r.divId.replace(/\#/g,""),r.submitId=!!r.submitId&&"#"+r.submitId.replace(/\#/g,"");var d,p=!1,f=(t("body"),t(this)),v=(t(r.divId),t(r.canvasId)),g=v.width(),m=v.height(),X=1*v.css("borderLeftWidth").replace("px",""),Y=1*v.css("borderTopWidth").replace("px","");v[0].width=g,v[0].height=m;var x=v[0].getContext("2d");x.canvasWidth=g,x.canvasHeight=m,x.font=r.canvasFont,x.fillStyle=r.canvasTextColor,v.addClass(r.shapes[Math.floor(Math.random()*r.shapes.length)]);var w=!1,T=!1,b=[],y=new function(){this.Templates=[],this.Templates.push(new n("triangle",[s(137,139),s(135,141),s(133,144),s(132,146),s(130,149),s(128,151),s(126,155),s(123,160),s(120,166),s(116,171),s(112,177),s(107,183),s(102,188),s(100,191),s(95,195),s(90,199),s(86,203),s(82,206),s(80,209),s(75,213),s(73,213),s(70,216),s(67,219),s(64,221),s(61,223),s(60,225),s(62,226),s(65,225),s(67,226),s(74,226),s(77,227),s(85,229),s(91,230),s(99,231),s(108,232),s(116,233),s(125,233),s(134,234),s(145,233),s(153,232),s(160,233),s(170,234),s(177,235),s(179,236),s(186,237),s(193,238),s(198,239),s(200,237),s(202,239),s(204,238),s(206,234),s(205,230),s(202,222),s(197,216),s(192,207),s(186,198),s(179,189),s(174,183),s(170,178),s(164,171),s(161,168),s(154,160),s(148,155),s(143,150),s(138,148),s(136,148)])),this.Templates.push(new n("x",[s(87,142),s(89,145),s(91,148),s(93,151),s(96,155),s(98,157),s(100,160),s(102,162),s(106,167),s(108,169),s(110,171),s(115,177),s(119,183),s(123,189),s(127,193),s(129,196),s(133,200),s(137,206),s(140,209),s(143,212),s(146,215),s(151,220),s(153,222),s(155,223),s(157,225),s(158,223),s(157,218),s(155,211),s(154,208),s(152,200),s(150,189),s(148,179),s(147,170),s(147,158),s(147,148),s(147,141),s(147,136),s(144,135),s(142,137),s(140,139),s(135,145),s(131,152),s(124,163),s(116,177),s(108,191),s(100,206),s(94,217),s(91,222),s(89,225),s(87,226),s(87,224)])),this.Templates.push(new n("rectangle",[s(78,149),s(78,153),s(78,157),s(78,160),s(79,162),s(79,164),s(79,167),s(79,169),s(79,173),s(79,178),s(79,183),s(80,189),s(80,193),s(80,198),s(80,202),s(81,208),s(81,210),s(81,216),s(82,222),s(82,224),s(82,227),s(83,229),s(83,231),s(85,230),s(88,232),s(90,233),s(92,232),s(94,233),s(99,232),s(102,233),s(106,233),s(109,234),s(117,235),s(123,236),s(126,236),s(135,237),s(142,238),s(145,238),s(152,238),s(154,239),s(165,238),s(174,237),s(179,236),s(186,235),s(191,235),s(195,233),s(197,233),s(200,233),s(201,235),s(201,233),s(199,231),s(198,226),s(198,220),s(196,207),s(195,195),s(195,181),s(195,173),s(195,163),s(194,155),s(192,145),s(192,143),s(192,138),s(191,135),s(191,133),s(191,130),s(190,128),s(188,129),s(186,129),s(181,132),s(173,131),s(162,131),s(151,132),s(149,132),s(138,132),s(136,132),s(122,131),s(120,131),s(109,130),s(107,130),s(90,132),s(81,133),s(76,133)])),this.Templates.push(new n("circle",[s(127,141),s(124,140),s(120,139),s(118,139),s(116,139),s(111,140),s(109,141),s(104,144),s(100,147),s(96,152),s(93,157),s(90,163),s(87,169),s(85,175),s(83,181),s(82,190),s(82,195),s(83,200),s(84,205),s(88,213),s(91,216),s(96,219),s(103,222),s(108,224),s(111,224),s(120,224),s(133,223),s(142,222),s(152,218),s(160,214),s(167,210),s(173,204),s(178,198),s(179,196),s(182,188),s(182,177),s(178,167),s(170,150),s(163,138),s(152,130),s(143,129),s(140,131),s(129,136),s(126,139)])),this.Templates.push(new n("check",[s(91,185),s(93,185),s(95,185),s(97,185),s(100,188),s(102,189),s(104,190),s(106,193),s(108,195),s(110,198),s(112,201),s(114,204),s(115,207),s(117,210),s(118,212),s(120,214),s(121,217),s(122,219),s(123,222),s(124,224),s(126,226),s(127,229),s(129,231),s(130,233),s(129,231),s(129,228),s(129,226),s(129,224),s(129,221),s(129,218),s(129,212),s(129,208),s(130,198),s(132,189),s(134,182),s(137,173),s(143,164),s(147,157),s(151,151),s(155,144),s(161,137),s(165,131),s(171,122),s(174,118),s(176,114),s(177,112),s(177,114),s(175,116),s(173,118)])),this.Templates.push(new n("caret",[s(79,245),s(79,242),s(79,239),s(80,237),s(80,234),s(81,232),s(82,230),s(84,224),s(86,220),s(86,218),s(87,216),s(88,213),s(90,207),s(91,202),s(92,200),s(93,194),s(94,192),s(96,189),s(97,186),s(100,179),s(102,173),s(105,165),s(107,160),s(109,158),s(112,151),s(115,144),s(117,139),s(119,136),s(119,134),s(120,132),s(121,129),s(122,127),s(124,125),s(126,124),s(129,125),s(131,127),s(132,130),s(136,139),s(141,154),s(145,166),s(151,182),s(156,193),s(157,196),s(161,209),s(162,211),s(167,223),s(169,229),s(170,231),s(173,237),s(176,242),s(177,244),s(179,250),s(181,255),s(182,257)])),this.Templates.push(new n("zigzag",[s(307,216),s(333,186),s(356,215),s(375,186),s(399,216),s(418,186)])),this.Templates.push(new n("arrow",[s(68,222),s(70,220),s(73,218),s(75,217),s(77,215),s(80,213),s(82,212),s(84,210),s(87,209),s(89,208),s(92,206),s(95,204),s(101,201),s(106,198),s(112,194),s(118,191),s(124,187),s(127,186),s(132,183),s(138,181),s(141,180),s(146,178),s(154,173),s(159,171),s(161,170),s(166,167),s(168,167),s(171,166),s(174,164),s(177,162),s(180,160),s(182,158),s(183,156),s(181,154),s(178,153),s(171,153),s(164,153),s(160,153),s(150,154),s(147,155),s(141,157),s(137,158),s(135,158),s(137,158),s(140,157),s(143,156),s(151,154),s(160,152),s(170,149),s(179,147),s(185,145),s(192,144),s(196,144),s(198,144),s(200,144),s(201,147),s(199,149),s(194,157),s(191,160),s(186,167),s(180,176),s(177,179),s(171,187),s(169,189),s(165,194),s(164,196)])),this.Templates.push(new n("leftbracket",[s(140,124),s(138,123),s(135,122),s(133,123),s(130,123),s(128,124),s(125,125),s(122,124),s(120,124),s(118,124),s(116,125),s(113,125),s(111,125),s(108,124),s(106,125),s(104,125),s(102,124),s(100,123),s(98,123),s(95,124),s(93,123),s(90,124),s(88,124),s(85,125),s(83,126),s(81,127),s(81,129),s(82,131),s(82,134),s(83,138),s(84,141),s(84,144),s(85,148),s(85,151),s(86,156),s(86,160),s(86,164),s(86,168),s(87,171),s(87,175),s(87,179),s(87,182),s(87,186),s(88,188),s(88,195),s(88,198),s(88,201),s(88,207),s(89,211),s(89,213),s(89,217),s(89,222),s(88,225),s(88,229),s(88,231),s(88,233),s(88,235),s(89,237),s(89,240),s(89,242),s(91,241),s(94,241),s(96,240),s(98,239),s(105,240),s(109,240),s(113,239),s(116,240),s(121,239),s(130,240),s(136,237),s(139,237),s(144,238),s(151,237),s(157,236),s(159,237)])),this.Templates.push(new n("rightbracket",[s(112,138),s(112,136),s(115,136),s(118,137),s(120,136),s(123,136),s(125,136),s(128,136),s(131,136),s(134,135),s(137,135),s(140,134),s(143,133),s(145,132),s(147,132),s(149,132),s(152,132),s(153,134),s(154,137),s(155,141),s(156,144),s(157,152),s(158,161),s(160,170),s(162,182),s(164,192),s(166,200),s(167,209),s(168,214),s(168,216),s(169,221),s(169,223),s(169,228),s(169,231),s(166,233),s(164,234),s(161,235),s(155,236),s(147,235),s(140,233),s(131,233),s(124,233),s(117,235),s(114,238),s(112,238)])),this.Templates.push(new n("v",[s(89,164),s(90,162),s(92,162),s(94,164),s(95,166),s(96,169),s(97,171),s(99,175),s(101,178),s(103,182),s(106,189),s(108,194),s(111,199),s(114,204),s(117,209),s(119,214),s(122,218),s(124,222),s(126,225),s(128,228),s(130,229),s(133,233),s(134,236),s(136,239),s(138,240),s(139,242),s(140,244),s(142,242),s(142,240),s(142,237),s(143,235),s(143,233),s(145,229),s(146,226),s(148,217),s(149,208),s(149,205),s(151,196),s(151,193),s(153,182),s(155,172),s(157,165),s(159,160),s(162,155),s(164,150),s(165,148),s(166,146)])),this.Templates.push(new n("delete",[s(123,129),s(123,131),s(124,133),s(125,136),s(127,140),s(129,142),s(133,148),s(137,154),s(143,158),s(145,161),s(148,164),s(153,170),s(158,176),s(160,178),s(164,183),s(168,188),s(171,191),s(175,196),s(178,200),s(180,202),s(181,205),s(184,208),s(186,210),s(187,213),s(188,215),s(186,212),s(183,211),s(177,208),s(169,206),s(162,205),s(154,207),s(145,209),s(137,210),s(129,214),s(122,217),s(118,218),s(111,221),s(109,222),s(110,219),s(112,217),s(118,209),s(120,207),s(128,196),s(135,187),s(138,183),s(148,167),s(157,153),s(163,145),s(165,142),s(172,133),s(177,127),s(179,127),s(180,125)])),this.Templates.push(new n("star",[s(75,250),s(75,247),s(77,244),s(78,242),s(79,239),s(80,237),s(82,234),s(82,232),s(84,229),s(85,225),s(87,222),s(88,219),s(89,216),s(91,212),s(92,208),s(94,204),s(95,201),s(96,196),s(97,194),s(98,191),s(100,185),s(102,178),s(104,173),s(104,171),s(105,164),s(106,158),s(107,156),s(107,152),s(108,145),s(109,141),s(110,139),s(112,133),s(113,131),s(116,127),s(117,125),s(119,122),s(121,121),s(123,120),s(125,122),s(125,125),s(127,130),s(128,133),s(131,143),s(136,153),s(140,163),s(144,172),s(145,175),s(151,189),s(156,201),s(161,213),s(166,225),s(169,233),s(171,236),s(174,243),s(177,247),s(178,249),s(179,251),s(180,253),s(180,255),s(179,257),s(177,257),s(174,255),s(169,250),s(164,247),s(160,245),s(149,238),s(138,230),s(127,221),s(124,220),s(112,212),s(110,210),s(96,201),s(84,195),s(74,190),s(64,182),s(55,175),s(51,172),s(49,170),s(51,169),s(56,169),s(66,169),s(78,168),s(92,166),s(107,164),s(123,161),s(140,162),s(156,162),s(171,160),s(173,160),s(186,160),s(195,160),s(198,161),s(203,163),s(208,163),s(206,164),s(200,167),s(187,172),s(174,179),s(172,181),s(153,192),s(137,201),s(123,211),s(112,220),s(99,229),s(90,237),s(80,244),s(73,250),s(69,254),s(69,252)])),this.Templates.push(new n("pigtail",[s(81,219),s(84,218),s(86,220),s(88,220),s(90,220),s(92,219),s(95,220),s(97,219),s(99,220),s(102,218),s(105,217),s(107,216),s(110,216),s(113,214),s(116,212),s(118,210),s(121,208),s(124,205),s(126,202),s(129,199),s(132,196),s(136,191),s(139,187),s(142,182),s(144,179),s(146,174),s(148,170),s(149,168),s(151,162),s(152,160),s(152,157),s(152,155),s(152,151),s(152,149),s(152,146),s(149,142),s(148,139),s(145,137),s(141,135),s(139,135),s(134,136),s(130,140),s(128,142),s(126,145),s(122,150),s(119,158),s(117,163),s(115,170),s(114,175),s(117,184),s(120,190),s(125,199),s(129,203),s(133,208),s(138,213),s(145,215),s(155,218),s(164,219),s(166,219),s(177,219),s(182,218),s(192,216),s(196,213),s(199,212),s(201,211)])),this.Recognize=function(t){var e,s,n,i=1/0,r=0;for(t=o(t,a),e=h(t),t=c(t,-e),n=l(t),s=0;s<this.Templates.length;s++){var d=u(this.Templates[s].Vector,n);d<i&&(i=d,r=s)}return new function(t,e){this.Name=t,this.Score=e}(this.Templates[r].Name,1/i)}};d=new e(x);var C=function(e){if(p)return!1;e.preventDefault();var n=k(e),a=n[0],i=n[1];return w=!0,T=!0,t("body").addClass("mc-noselect"),x.clearRect(0,0,g,m),d.strokeStart(a,i),v.removeClass("mc-invalid mc-valid"),b=[s(a,i)],!1},I=function(t){if(T)return T=0;if(!p&&w){t.preventDefault();var e=k(t),n=e[0],a=e[1];b[b.length]=s(n,a),d.stroke(n,a)}return!1},M=function(e){if(!p&&w)if(w=!1,t("body").removeClass("mc-noselect"),b.length>=10){var s=y.Recognize(b);v.attr("class").match(s.Name)&&s.Score>.7?(p=1,setTimeout(d.destroy,500),v.addClass("mc-valid"),x.fillText(r.successMsg,10,24),r.onSuccess(f,v,x)):(v.addClass("mc-invalid"),x.fillText(r.errorMsg,10,24),r.onError(f,v,x))}else v.addClass("mc-invalid"),x.fillText(r.errorMsg,10,24),r.onError(f,v,x);return!1};function k(t){var e,s;return t.touches&&t.touches.length>0?(e=t.touches[0].pageX-v.offset().left+X,s=t.touches[0].pageY-v.offset().top+Y):t.offsetX?(e=t.offsetX-X,s=t.offsetY-Y):(e=t.pageX-v.offset().left-X,s=t.pageY-v.offset().top-Y),[e,s]}v.bind({mousedown:C,mousemove:I,mouseup:M}),v[0].addEventListener("touchstart",C,!1),v[0].addEventListener("touchmove",I,!1),v[0].addEventListener("touchend",M,!1),f.addClass(r.cssClass.replace(/\./,""))})},t.fn.motionCaptcha.defaults={actionId:"#mc-action",divId:"#mc",canvasId:"#mc-canvas",submitId:!1,cssClass:".mc-active",shapes:["triangle","x","rectangle","circle","check","caret","zigzag","arrow","leftbracket","rightbracket","v","delete","star","pigtail"],canvasFont:'15px "Lucida Grande"',canvasTextColor:"#111",errorMsg:"Please try again.",successMsg:"Captcha passed!",noCanvasMsg:"Your browser doesn't support <canvas> - try Chrome, FF4, Safari or IE9.",label:"<p>Please draw the shape in the box to submit the form:</p>",onSuccess:function(e,s,n){unlock();a=this.submitId?e.find(this.submitId):e.find("input[type=button]:disabled");e.attr("action",t(this.actionId).val()),a.prop("disabled",!1)},onError:function(t,e,s){}},e.prototype={ctx:null,X:null,Y:null,painters:null,interval:null,init:function(t){var e=this,s=navigator.userAgent.toLowerCase(),n=s.search("android")>-1||s.search("iphone")>-1?2:1,a=[0,0,0];this.ctx=t,this.ctx.globalCompositeOperation="source-over",this.X=this.ctx.canvasWidth/2,this.Y=this.ctx.canvasHeight/2,this.painters=[];for(var i=0;i<38;i++)this.painters.push({dx:this.ctx.canvasWidth/2,dy:this.ctx.canvasHeight/2,ax:0,ay:0,div:.1,ease:.18*Math.random()+.6});this.interval=setInterval(function(){var t;for(e.ctx.lineWidth=n,e.ctx.strokeStyle="rgba("+a[0]+", "+a[1]+", "+a[2]+", 0.06)",t=0;t<e.painters.length;t++)e.ctx.beginPath(),e.ctx.moveTo(e.painters[t].dx,e.painters[t].dy),e.painters[t].dx-=e.painters[t].ax=(e.painters[t].ax+(e.painters[t].dx-e.X)*e.painters[t].div)*e.painters[t].ease,e.painters[t].dy-=e.painters[t].ay=(e.painters[t].ay+(e.painters[t].dy-e.Y)*e.painters[t].div)*e.painters[t].ease,e.ctx.lineTo(e.painters[t].dx,e.painters[t].dy),e.ctx.stroke()},1e3/60)},destroy:function(){clearInterval(this.interval)},strokeStart:function(t,e){this.X=t,this.Y=e;for(var s=0;s<this.painters.length;s++)this.painters[s].dx=t,this.painters[s].dy=e;this.shouldDraw=!0},stroke:function(t,e){this.X=t,this.Y=e}};var a=64,i=250,r=s(0,0);function o(t,e){var n,a=function(t){var e,s=0;for(e=1;e<t.length;e++)s+=p(t[e-1],t[e]);return s}(t)/(e-1),i=0,r=new Array(t[0]);for(n=1;n<t.length;n++){var o=p(t[n-1],t[n]);if(i+o>=a){var h=s(t[n-1].X+(a-i)/o*(t[n].X-t[n-1].X),t[n-1].Y+(a-i)/o*(t[n].Y-t[n-1].Y));r[r.length]=h,t.splice(n,0,h),i=0}else i+=o}return r.length==e-1&&(r[r.length]=s(t[t.length-1].X,t[t.length-1].Y)),r}function h(t){var e=d(t);return Math.atan2(e.Y-t[0].Y,e.X-t[0].X)}function c(t,e){var n,a=d(t),i=Math.cos(e),r=Math.sin(e),o=[];for(n=0;n<t.length;n++){var h=(t[n].X-a.X)*i-(t[n].Y-a.Y)*r+a.X,c=(t[n].X-a.X)*r+(t[n].Y-a.Y)*i+a.Y;o[o.length]=s(h,c)}return o}function l(t){var e,s,n=0,a=[];for(e=0;e<t.length;e++)a[a.length]=t[e].X,a[a.length]=t[e].Y,n+=t[e].X*t[e].X+t[e].Y*t[e].Y;for(s=Math.sqrt(n),e=0;e<a.length;e++)a[e]/=s;return a}function u(t,e){var s,n,a=0,i=0;for(s=0;s<t.length;s+=2)a+=t[s]*e[s]+t[s+1]*e[s+1],i+=t[s]*e[s+1]-t[s+1]*e[s];return n=Math.atan(i/a),Math.acos(a*Math.cos(n)+i*Math.sin(n))}function d(t){var e,n=0,a=0;for(e=0;e<t.length;e++)n+=t[e].X,a+=t[e].Y;return s(n/=t.length,a/=t.length)}function p(t,e){var s=e.X-t.X,n=e.Y-t.Y;return Math.sqrt(s*s+n*n)}}(jQuery);function unlock(){var sbut=document.getElementById("xt");sbut.disabled = false;}//Copyright (c) 2011 Joss Crowcroft, others, edited by jst